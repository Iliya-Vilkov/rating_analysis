# История разработки и документация проекта

## Этап 1: Создание структуры проекта (06.11.2025)

### 1.1 Созданная структура директорий:
```
rating_analysis/
├── src/
│   ├── __init__.py
│   ├── main.py           # Основной скрипт
│   ├── report/
│   │   ├── __init__.py
│   │   ├── base.py       # Базовый класс для отчетов
│   │   └── average_rating.py  # Отчет по рейтингам
│   └── utils/
│       ├── __init__.py
│       ├── models.py     # Модели данных
│       └── file_reader.py # Работа с файлами
├── tests/
│   ├── __init__.py
│   ├── test_average_rating.py
│   ├── test_file_reader.py
│   └── fixtures/         # Тестовые данные
│       └── test_data.csv
├── README.md
├── requirements.txt     # Основные зависимости
└── requirements-dev.txt # Зависимости для разработки
```

### 1.2 Ключевые компоненты:

#### 1.2.1 Модели данных (`src/utils/models.py`)
- Класс `Record` для хранения данных о продукте
- Использование `@dataclass` для автоматической генерации методов
- Поля: название, бренд, цена, рейтинг

#### 1.2.2 Базовый класс отчета (`src/report/base.py`)
- Абстрактный класс `BaseReport`
- Определен метод `generate()` для реализации в дочерних классах
- Типизация с использованием `List[Record]`

#### 1.2.3 Отчет по рейтингам (`src/report/average_rating.py`)
- Реализация `AverageRatingReport`
- Расчет среднего рейтинга по брендам
- Сортировка по убыванию рейтинга
- Использование `tabulate` для вывода таблиц

#### 1.2.4 Работа с файлами (`src/utils/file_reader.py`)
- Функция `read_csv_files()` для чтения CSV
- Обработка ошибок отсутствия файла и неверного формата
- Валидация данных при чтении

#### 1.2.5 Основной модуль (`src/main.py`)
- Обработка аргументов командной строки
- Фабрика для создания отчетов
- Обработка ошибок выполнения

### 1.3 Тесты:

#### 1.3.1 Тест отчета (`tests/test_average_rating.py`)
- Проверка расчета средних значений
- Проверка сортировки результатов
- Проверка обработки пустых данных

#### 1.3.2 Тест чтения файлов (`tests/test_file_reader.py`)
- Проверка чтения правильного файла
- Проверка чтения нескольких файлов
- Проверка обработки отсутствующего файла
- Проверка обработки неверного формата

### 1.4 Зависимости:

#### Основные зависимости:
- tabulate: форматирование таблиц для вывода

#### Зависимости разработки:
- pytest: модульное тестирование
- pytest-cov: анализ покрытия кода тестами
- black: форматирование кода
- isort: сортировка импортов
- flake8: проверка стиля кода

## Как запустить проект

### Установка
```bash
# Создание виртуального окружения
python -m venv venv

# Активация виртуального окружения
# Windows:
venv\Scripts\activate
# Linux/Mac:
# source venv/bin/activate

# Установка основных зависимостей
pip install -r requirements.txt

# Установка зависимостей для разработки (опционально)
pip install -r requirements-dev.txt
```

### Запуск
```bash
# Запуск с тестовыми данными
python -m src.main --files tests/fixtures/test_data.csv --report average-rating

# Запуск тестов
pytest

# Проверка покрытия
pytest --cov

# Форматирование кода
black .
isort .
```

## Принципы разработки

1. **Архитектурные принципы**:
   - Следование принципам SOLID
   - Разделение ответственности
   - Возможность легкого добавления новых отчетов

2. **Стиль кода**:
   - Аннотации типов для удобства разработки
   - Документация в формате docstrings
   - Соответствие PEP 8

3. **Тестирование**:
   - Модульные тесты для всех компонентов
   - Использование фикстур pytest
   - Проверка граничных случаев

## Задачи на будущее:

- [ ] Добавить автоматическую сборку (CI/CD)
- [ ] Добавить автоматическую проверку кода при коммитах
- [ ] Расширить покрытие тестами
- [ ] Добавить систему логирования
- [ ] Добавить дополнительную валидацию входных данных